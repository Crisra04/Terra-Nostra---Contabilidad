<!doctype html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Contabilidad - Terra Nostra V 1.10</title><link rel="stylesheet" href="styles.css"></head>
<body>
<div class="topbar"><h1>Contabilidad - Terra Nostra V 1.10</h1><div class="actions"><button id="exportPdf" class="btn ghost">Exportar PDF</button><button id="closeMonth" class="btn ghost">Cerrar mes</button></div></div>
<nav class="tabs">
  <button class="nav-item" data-tab="movs">Movimientos</button>
  <button class="nav-item" data-tab="accounts">Cuentas</button><button class="nav-item" data-tab="rrhh">RR.HH.</button><button class="nav-item" data-tab="deudas">Deudas</button>
  <button class="nav-item" data-tab="polizas">Pólizas</button>
  <button class="nav-item" data-tab="dash">Dashboard</button><button class="nav-item" data-tab="eeff">EEFF (IUE)</button><button class="nav-item" data-tab="kpis">KPIs</button>
  <button class="nav-item" data-tab="settings">Ajustes</button>
</nav>
<section class="tab" id="tab-movs">
  <section class="card">
    <h2>Movimientos</h2>
    <div class="table-toolbar">
      <button class="btn ghost" id="exportJson">Exportar JSON</button>
      <button class="btn ghost" id="exportCsv">Exportar CSV</button>
      <button class="btn ghost" id="exportPdf">Exportar PDF</button>
      <button class="btn" id="exportLibrosIva">Libros IVA (CSV)</button>
      <button class="btn" id="exportBss">BSS (CSV)</button>
      <label class="btn ghost file">Importar JSON<input type="file" id="importJson" accept="application/json"></label>
    </div>
    <button class="btn" id="addTx">+ Rápido</button>
    <div id="txTable" class="table-scroll"></div>
  </section>
</section>
<section class="tab" id="tab-accounts" hidden>
  <section class="card">
    <h2>Plan de Cuentas (PUCT) – Servicios Inmobiliarios</h2>
    <div class="row">
      <label class="btn ghost file">Importar PUCT CSV<input type="file" id="importPuct" accept=".csv,text/csv"></label>
      <button class="btn ghost" id="exportPuct">Exportar catálogo</button>
      <button class="btn" id="addAnalitica">Añadir cuenta analítica (nivel 5)</button>
    </div>
    <p class="muted">Solo el nivel 5 es editable.</p>
    <div id="puctTable" class="table-scroll"></div>
  </section>
</section>
<section class="tab" id="tab-polizas" hidden>
  <section class="card">
    <h2>Pólizas (Partida doble)</h2>
    <div class="row">
      <button class="btn" id="newPoliza">Nueva póliza</button>
      <button class="btn ghost" id="exportPolizasCsv">Exportar pólizas (CSV)</button>
    </div>
    <div id="polizaTable" class="table-scroll"></div>
  </section>
</section>

<section class="tab" id="tab-rrhh" hidden>
  <section class="card">
    <h2>RR.HH. — RC-IVA Dependientes</h2>
    <div class="row">
      <button class="btn" id="addEmpleado">+ Empleado</button>
      <button class="btn ghost" id="genPlanillaRcIva">Generar planilla RC-IVA (mes)</button>
      <label>SMN (Bs) <input type="number" step="0.01" id="smn" value="2362.50"></label>
      <label>MNI = 2×SMN <input type="number" step="0.01" id="mni" value="4725.00"></label>
    </div>
    <div id="empleadosTable" class="table-scroll"></div>
  </section>
</section>

<section class="tab" id="tab-deudas" hidden>
  <section class="card">
    <h2>Deudas</h2>
    <div class="row">
      <button class="btn" id="addDeuda">+ Nueva deuda</button>
      <button class="btn ghost" id="genCuotasMes">Generar pólizas cuotas (mes)</button>
    </div>
    <div id="deudasTable" class="table-scroll"></div>
  </section>
</section>

<section class="tab" id="tab-dash" hidden>
<section class="tab" id="tab-eeff" hidden>
  <section class="card">
    <h2>Paquete IUE — Estados Financieros</h2>
    <div class="row">
      <label>Periodo <input type="month" id="perEeff"></label>
      <button class="btn" id="genEEFF">Generar EEFF</button>
      <button class="btn ghost" id="exportEEFFZip">Exportar paquete (ZIP)</button>
    </div>
    <div id="eeffBox" class="table-scroll"></div>
    <h3>Notas</h3>
    <textarea id="notasEeff" rows="6" placeholder="Notas a los estados financieros..."></textarea>
  </section>
</section>

<section class="tab" id="tab-kpis" hidden>
  <section class="card">
    <h2>KPIs</h2>
    <div class="row">
      <label>Periodo base <input type="month" id="perKpi"></label>
      <label>Comparar con <input type="month" id="perKpiCmp"></label>
      <button class="btn" id="calcKpi">Calcular</button>
    </div>
    <div id="kpiBox" class="table-scroll"></div>
  </section>
</section>
<section class="card"><h2>Dashboard</h2></section></section>
<section class="tab" id="tab-settings" hidden><section class="card"><h2>Ajustes</h2></section></section>

<dialog id="txModal" class="sheet">
  <form method="dialog" id="txForm">
    <div class="sheet-head"><div class="sheet-title"><h3>Movimiento</h3></div><button class="icon-btn" id="closeTx">✕</button></div>
    <div class="grid">
      <label>Monto<input type="number" step="0.01" id="amount" required></label>
      <label>Tipo<select id="type"><option value="ingreso">Ingreso</option><option value="gasto">Gasto</option></select></label>
      <label>Categoría<input id="category" placeholder="ej. Ingresos por servicios"></label>
      <label>Moneda<select id="currency"><option>BOB</option><option>USD</option></select></label>
      <label>TC<input type="number" step="0.0001" id="fx" value="6.96"></label>
      <label>Fecha<input type="date" id="date"></label>
      <label>Cuenta (PUCT)<input id="accountCode" list="puctlist" placeholder="ej. 1.1.1.001"></label><datalist id="puctlist"></datalist>
      <label>Deuda<select id="debtId"><option value="">— Ninguna —</option></select></label>
      <label class="checkbox"><input type="checkbox" id="isInterest"> Es interés de deuda</label>
    </div>
    <label>Notas<textarea id="notes" rows="2" placeholder="detalle, proveedor, n° factura"></textarea></label>
    <div class="grid">
      <label>NIT / CI<input id="nit" placeholder="ej. 12345601"></label>
      <label>Razón social<input id="razon" placeholder="Nombre o Razón Social"></label>
      <label>N° Factura<input id="nroFactura" placeholder="Solo si corresponde"></label>
      <label>CUF<input id="cuf" placeholder="Código Único de Facturación"></label>
      <label>Tipo doc.<select id="tipoDoc"><option value="">—</option><option>Factura</option><option>Recibo</option><option>Nota</option></select></label>
    </div>
    <div class="row">
      <label class="checkbox"><input type="checkbox" id="ivaGravado"> Venta gravada IVA (13% por dentro)</label>
      <label class="checkbox"><input type="checkbox" id="ivaCredito"> Compra con crédito fiscal (13%)</label>
      <label class="checkbox"><input type="checkbox" id="ivaExento"> Operación exenta</label>
    </div>
    <div class="row sheet-foot"><button id="saveTx" class="btn gold" value="default">Guardar</button></div>
  </form>
</dialog>

<dialog id="polizaModal" class="sheet">
  <form method="dialog" id="polForm">
    <div class="sheet-head"><div class="sheet-title"><h3>Póliza</h3></div><button class="icon-btn" id="closePol">✕</button></div>
    <div class="grid">
      <label>Número<input id="polNumber" placeholder="YYYY-MM-####" required></label>
      <label>Fecha<input type="date" id="polDate" required></label>
      <label>Glosa<input id="polMemo" placeholder="Descripción"></label>
    </div>
    <div class="card" style="margin-top:8px">
      <div class="row"><button type="button" class="btn" id="addLine">Agregar línea</button></div>
      <div id="linesBox" class="table-scroll"></div>
    </div>
    <div class="row sheet-foot"><button class="btn gold" value="default" id="savePol">Guardar póliza</button></div>
  </form>
</dialog>

<script src="app.js"></script>
</body></html>